using Capgemini.Inventory.BusinessLayer;
using Inventory.Entities;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
//using System.Web.Http.Cors;
using System.Threading.Tasks;
using Inventory.MVC.Models;
using System.Web.Http.Description;

namespace Inventory.MVC.ApiControllers
{
    public class SuppliersController : ApiController
    {
        private Supplier supplier;
       
        private SupplierBL suppliersBL;
        
       

        public SuppliersController()
        {
            suppliersBL = new SupplierBL();
            supplier = new Supplier();
        }

        //      api/suppliers
        [HttpGet]
        public async Task<List<SupplierViewModel>> GetAllSuppliersBL()
        {
            List<SupplierViewModel> suppliersVM = new List<SupplierViewModel>();
            List<Supplier> suppliers = await suppliersBL.GetAllSuppliersBL();
            foreach (var item in suppliers)
            {
                SupplierViewModel supplierVM = new SupplierViewModel() { /*SupplierID = item.SupplierID,*/ SupplierName = item.SupplierName, Email = item.Email, SupplierMobile = item.SupplierMobile, CreationDateTime = item.CreationDateTime, LastModifiedDateTime = item.LastModifiedDateTime };
                suppliersVM.Add(supplierVM);
            }


            return suppliersVM;
        }

      

    }
}



